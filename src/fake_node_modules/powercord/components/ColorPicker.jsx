/**
 * Copyright (c) 2018-2020 aetheryx & Bowser65
 * All Rights Reserved. Licensed under the Porkord License
 * https://powercord.dev/porkord-license
 */

/* eslint-disable object-property-newline, new-cap */

const { getModuleByDisplayName } = require('powercord/webpack');
const { findInReactTree } = require('powercord/util');
const AsyncComponent = require('./AsyncComponent');

module.exports = AsyncComponent.from(
  (async () => {
    const GuildFolderSettingsModal = await getModuleByDisplayName('GuildFolderSettingsModal');
    const ModalRoot = GuildFolderSettingsModal.prototype.render.call({ props: { transitionState: 0 }, state: { name: '', color: '' } });
    const SuspendedPicker = findInReactTree(ModalRoot, n => n.props?.defaultColor).type;
    const LazyWebpackModule = await SuspendedPicker().props.children.type;
    const mdl = await (LazyWebpackModule._ctor || LazyWebpackModule._payload._result)();

    return mdl.default;
  })()
);
