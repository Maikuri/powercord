/**
 * Copyright (c) 2018-2020 aetheryx & Bowser65
 * All Rights Reserved. Licensed under the Porkord License
 * https://powercord.dev/porkord-license
 */

const { React, getAllModules } = require('powercord/webpack');

// Thanks to Juby210#0577 for pointing this out
const registry = getAllModules(m => typeof m === 'function' && m.toString().indexOf('"currentColor"') !== -1);
const Icon = (props) => {
  const mdl = registry.find(m => m.displayName === props.name);
  const newProps = global._.cloneDeep(props);
  delete newProps.name;

  return React.createElement(mdl, newProps);
};
Icon.Names = registry.map(m => m.displayName);

module.exports = Icon;
